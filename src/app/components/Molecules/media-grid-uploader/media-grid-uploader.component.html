<div class="media-grid">
  @for (m of items; track m.secureUrl; let i = $index) {
    <div class="tile" [attr.data-test]="'media-item-' + i">
      <img [src]="thumb(m.secureUrl)" alt="media" />
      <button
        type="button"
        class="tile__remove"
        (click)="remove(i)"
        aria-label="Supprimer"
        [attr.data-test]="'media-remove-' + i"
      >
        ×
      </button>
      @if (i === 0) {
        <span class="tile__badge">Principal</span>
      }
    </div>
  }

  @if (items.length < maxItems) {
    <label class="tile tile--add" data-test="media-add">
      <input
        type="file"
        multiple
        accept="image/*,video/*"
        (change)="onPickFiles($event)"
        hidden
      />
      <span>+</span>
    </label>
  }
</div>

@if (uploading) {
  <p class="media-grid__status">Téléversement…</p>
}
@if (error) {
  <p class="media-grid__error">{{ error }}</p>
}
